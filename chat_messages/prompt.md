# Chat Messages Page Prompt

**目标**：构建 `chat_messages/index.html` 页面，结构与交互逻辑基于 `interactive_messages/index.html`，重点实现聊天消息在不同场景下的推送逻辑和页面跳转。

**UI 结构**：
1.  **左侧模拟器**：
    *   适配 Xiaomi 15 Pro 尺寸 (20:9)。
    *   包含 "未打开 App" (System Push) 和 "打开 App" (In-App) 两种场景视图。
    *   背景图复用：
        *   未打开 App：`../interactive_messages/assets/desktop.jpg`
        *   消息首页：`../interactive_messages/assets/msgidx.jpg`
        *   打开 App：`../interactive_messages/assets/tlsq.jpg`
2.  **右侧控制面板**：
    *   垂直分为两个场景区块。
    *   **区块 1：未打开 App 时**
        *   按钮：发送聊天消息。
    *   **区块 2：打开 App 未在当前页面**
        *   按钮：发送聊天消息（点击一次发送一条，快速点击可触发合并推送逻辑）。

**交互逻辑与场景定义**：

**场景一：未打开 App (System Push)**
*   **推送样式**：
    *   收到一条 Push（不折叠）。
    *   **内容展示**：`用户昵称：消息内容`（最多20字截断）。
    *   示例："慧慧：今晚有空出来吃饭吗？就在..."
*   **跳转逻辑**：
    *   点击卡片 -> 进入 **聊天详情页**。
    *   **聊天详情页**：
        *   顶部显示对方昵称和返回按钮。
        *   中间展示模拟的对话内容。
    *   点击返回按钮 -> 跳转到 **消息列表页面** (显示 `msgidx.jpg` 背景)。

**场景二：打开 App 未在当前页面 (In-App Push)**
*   **推送逻辑 (频控)**：
    *   系统需记录 5 秒内的消息接收数量。
    *   **情况 A (5秒内 < 3条)**：
        *   样式：APP内顶部横幅 **单条推送**。
        *   内容：`用户昵称：消息内容`（最多20字截断）。
    *   **情况 B (5秒内 ≥ 3条)**：
        *   样式：APP内顶部横幅 **合并推送**。
        *   内容：`你收到 n 条未读消息` (n 为当前累计数)。
*   **跳转逻辑**：
    *   点击卡片 -> 进入 **聊天详情页**。
    *   点击返回按钮 -> 返回 **之前 App 所在的页面** (即关闭聊天详情页，露出底部的 `tlsq.jpg` 背景)。

**资源路径**：
*   图片资源引用 `../interactive_messages/assets/` 路径。

**代码结构要求**：
*   **JS 分离**：所有交互逻辑代码必须从 HTML 文件中剥离，存放在同级目录下的 `script.js` 文件中。
*   **引用**：在 `index.html` 底部通过 `<script src="script.js"></script>` 引入。
